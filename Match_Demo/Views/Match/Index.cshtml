@model Tuple<IEnumerable<SelectListItem>, IEnumerable<SelectListItem>, IEnumerable<SelectListItem>>
@{
    ViewBag.Title = "Index";
}



<fieldset>
    <legend class="text-center"><h3>Match Form</h3></legend>

    <div class="row">
        <div class="form-group ">

            <div class="col-md-6">
                Match Name :
                <input type="text" id="txtMatchName" class="form-control" name="MatchName" placeholder="Enter Match Name" />
            </div>
        </div>
        <div class="form-group ">
            <div class="col-md-6">
                Match Date:
                <input type="text" id="txtMatchdate" class="form-control" name="MatchDate" placeholder="dd/mm/yyy" />
            </div>
        </div>
    </div>
    <div class="row">
        <div class="form-group ">
            <div class="col-md-6">
                Team One :@Html.DropDownList("TeamOne", new SelectList(Model.Item3, "Value", "Text"), new { @class = "form-control" })
            </div>
        </div>
        <div class="form-group ">
            <div class="col-md-6">
                Team Two :@Html.DropDownList("TeamTwo", new SelectList(Model.Item3, "Value", "Text"), new { @class = "form-control" })
            </div>
        </div>

    </div>
    <div class="row">
        <div class="form-group ">
            <div class="col-md-6">
                Start Time :
                <input type="text" id="txtstartTime" class="form-control" name="StartTime" placeholder="Enter Match Name" />
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-6">
                Address:

                <textarea id="txtAddress" name="Address" rows="3" cols="50" class="form-control"></textarea>
            </div>
        </div>
    </div>
</fieldset>

<fieldset>
    <div class="row">

        <div class="form-group pull-right">


            <input type="button" id="btnAddPlayers" value="Add Players" data-toggle="modal" data-target="#divAddPlayer" class="btn btn-primary" data-backdrop="static" data-keydrop="false" />
        </div>

    </div>

</fieldset>
<fieldset>
    <table id="tbllist" width="100%">
        <thead>
            <tr>
                <th hidden>
                    Item Id
                </th>
                <th>
                    Name
                </th>
                <th>
                    Type
                </th>
                <th>
                    Position
                </th>
                <th>
                    Team
                </th>

                <th>
                    Actions
                </th>
            </tr>
        </thead>
    </table>
</fieldset>

<br />
<div class="row">
    <div class="form-group pull-right">
        <input type="button" id="btnSubmit" value="Submit" data-toggle="modal" data-target="#divAddPlayer" class="btn btn-primary" data-backdrop="static" data-keydrop="false" />&nbsp;&nbsp;
        <input type="button" id="btnCancel" value="Cancel" class="btn btn-danger" />
    </div>

</div>



<div id="divAddPlayer" class="modal fade" role="dialog">
        <div class="modal-dialog" style="width:350px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Add Player</h4>
                </div>
                <div class="modal-body">
                    <div class="container-fluid">

                        <div class="form-group">
                            <label for="PlayerName" class="col-form-label">Name :</label>
                            @Html.DropDownList("PlayerName", new SelectList(Model.Item1, "Value", "Text"), new { @class = "form-control" })

                        </div>

                        


                        <div class="form-group">
                            <label for="PlayerType" class="col-form-label">Type :</label>
                            <input type="text" id="txtPlayerType" class="form-control" disabled/>

                        </div>




                        <div class="form-group">
                            <label for="txtPosition" class="col-form-label">Position :</label>

                            <input type="text" id="txtPosition" class="form-control" />
                        </div>




                        <div class="form-group">
                            <label for="Team" class="col-form-label">Team :</label>
                            @Html.DropDownList("Team", new SelectList(Model.Item3, "Value", "Text"), new { @class = "form-control" })

                        </div>



                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" id="btnAdd" value="Add">Add</button>
                    <button type="button" class="btn btn-danger" value="Close" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>



<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {

        
        $("#PlayerName").change(function () {
            var Id = $("#PlayerName").val();
            getPlayerType(Id);

        });
        $("#btnAdd").click(function () {
            //$("#divAddPlayer").closeModal();  
            AddPlayersToList();
        });
        
    });

    
    
    function AddPlayersToList() {
        var Id = $("#PlayerName").val();
        var PlayerName = $("#PlayerName option:selected").text();
        var PlayerType = $("#txtPlayerType").val();
        var Position = $("#txtPosition").val();
        var Team = $("#Team").val();
        
        var tableList = $("#tblList");
        var List = "<tr><td hidden>" + Id
            + "</td><td>" + PlayerName +
            "</td><td>" + PlayerType +
            "</td><td>" + Position +
            "</td><td>" + Team +
           
            "</td><td><input type='button' id='btnRemove' class='btn btn-danger' value=' Remove' onclick='RemoveItem(this)' name='remove'/></td></tr>";
        tableList.append(List);
        
        //resetItem();
    }
  
    
    function getPlayerType(Id) {
        //alert(itemId);
        $.ajax({
            async: true,
            type: 'Get',
            dataType: 'JSON',
            contentType: 'application/json;charset=utf-8',
            data: { Id: Id },
            url: '/Match/GetPlayerType',
            success: function (data) {
                $("#txtPlayerType").val(data);
            },
            error: function () {
                alert('Something Problem getting Item Price');
            }
        });
    }
</script>
